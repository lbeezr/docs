{{/* 
    - Displays child pages with titles, descriptions/summaries, & links to up to 7 children (or a count of children) 
*/}}


{{ if .Site.Params.childPages.display}}
    {{if .Pages }}
        <aside class="spread-left mt-5 c-pinned-top">
            {{ range sort .Pages "Weight" "$order"}}
                {{ if  .Params.hidden }}
                    {{/* Do not show the hidden child page or its descendants */}}
                {{else}}
                    <section class="is-one-third is-fullsize-mobile">
                        <div class="move-u p-1 mb-5">
                            <a href="{{.Permalink}}">
                                <h3 class="text-m">{{- .Title -}}<b class="text-s ml-2">></b></h3>
                                    {{if .Description}}
                                        <p class="text-s light">{{.Description}}</p>
                                    {{else}}
                                        <p class="text-s light" bold>{{.Summary | truncate 100}}</p>
                                    {{end}}
                            </a>
                            {{/*  Displays the value of the "required" frontmatter attribute if present  */}}
                            {{if .Params.label}}
                                <div class="darken-1 p-1 is-fit text-xxs uppercase">{{.Params.label}}</div>
                            {{end}}
                            {{ if .Site.Params.childPages.grandchildren}}
                                <div class="spread-left">
                                    {{ range first 7 .Pages }}
                                        <a class="button outlined p-4 mt-1 mr-1 text-xs  is-fit rounded-4" href="{{ .Permalink }}"> {{if .Title}}{{.Title | truncate 30}}{{else}}{{ path.BaseName . | humanize | truncate 30}}{{end}}
                                        </a>
                                    {{ end }}
                                    {{/*  {{if .Pages}}
                                        <a class="button outlined-purple p-1 mt-2 mr-2 xs is-fit rounded-4" href="{{ .Permalink }}"> View All </a>
                                    {{else}} 
                                    {{end}}  */}}
                                </div>
                            {{else}}
                                {{/*  Displays a count of child articles if grandchildren are disabled in config.yaml  */}}
                                <div class="label black darken-1"> {{ len (.Pages) }} articles</div>  
                            {{end}}
                            </div>
                    </section>
                {{end}}
            {{end}}
        </aside>
    {{end}}
{{end}}